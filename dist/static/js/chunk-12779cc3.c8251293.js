(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12779cc3"],{"0819":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("ValidationObserver",{ref:"observer",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("form",{staticClass:"role-info__inners",on:{submit:function(t){return t.preventDefault(),r(e.handleSubmitUser)}}},[a("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar"}},[a("div",{staticClass:"page-title"},[a("div",{staticClass:"title-container"},[a("router-link",{staticClass:"back-link",attrs:{to:"/users/areas/index"}},[a("font-awesome-icon",{staticClass:"icon-back",attrs:{icon:"chevron-left",color:"#424242"}})],1),e._v(" "),a("span",{staticClass:"title-page"},[e._v(e._s(e.formTitle))])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("router-link",{attrs:{to:"/users/areas/index"}},[a("el-button",{staticClass:"btn-back",attrs:{plain:""}},[e._v(e._s(e.generateTitleView("cancel","usermanagement"))+"\n              ")])],1),e._v(" "),a("button",{staticClass:"btn-save",attrs:{type:"submit",plain:""}},[e._v("\n              "+e._s(e.generateTitleView("save","usermanagement"))+"\n            ")])],1)])]),e._v(" "),a("md-card",{staticClass:"role-info"},[a("div",{staticClass:"role-info__inner"},[a("div",{staticClass:"role-info__inners"},[a("div",{staticClass:"info-title"},[e._v(e._s(e.generateTitleView("info","area")))]),e._v(" "),a("div",{staticClass:"info-content"},[a("div",{staticClass:"form"},[a("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("name","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:e.generateTitleView("areaName","area"),outlined:"",height:10},model:{value:e.formCreate.name,callback:function(t){e.$set(e.formCreate,"name",t)},expression:"formCreate.name"}}),e._v(" "),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)}),e._v(" "),a("v-select",{attrs:{items:e.listParentAreas,"item-text":"name","item-value":"id",label:e.generateTitleView("selectArea","area"),"persistent-hint":""},model:{value:e.formCreate.parentId,callback:function(t){e.$set(e.formCreate,"parentId",t)},expression:"formCreate.parentId"}})],1),e._v(" "),a("el-col",{staticClass:"vibotDateWrap",attrs:{span:12}},[a("vue-upload-multiple-image",{attrs:{"data-images":e.images,"id-upload":"myIdUpload","edit-upload":"myIdEdit",multiple:!1,"drag-text":"Kéo hình ảnh"},on:{"upload-success":e.uploadImageSuccess,"edit-image":e.editImage,"before-remove":e.beforeRemove}})],1)],1),e._v(" "),a("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("ValidationProvider",{attrs:{name:e.generateTitleView("areaName","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:e.generateTitleView("width","area"),outlined:"",height:10},model:{value:e.formCreate.width,callback:function(t){e.$set(e.formCreate,"width",t)},expression:"formCreate.width"}}),e._v(" "),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)})],1),e._v(" "),a("el-col",{staticClass:"vibotDateWrap",attrs:{span:12}},[a("ValidationProvider",{attrs:{name:e.generateTitleView("areaName","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:e.generateTitleView("height","area"),outlined:"",height:10},model:{value:e.formCreate.height,callback:function(t){e.$set(e.formCreate,"height",t)},expression:"formCreate.height"}}),e._v(" "),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)})],1)],1),e._v(" "),a("el-row",{staticClass:"mb-10",attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("v-textarea",{attrs:{label:e.generateTitleView("description","area"),outlined:"",rows:"3"},model:{value:e.formCreate.description,callback:function(t){e.$set(e.formCreate,"description",t)},expression:"formCreate.description"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mb-10",attrs:{gutter:40,type:"flex",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("ValidationProvider",{attrs:{rules:"required",name:e.generateTitleView("workat","veeValidate")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-select",{attrs:{items:e.AREA_STATUS,"item-text":"label","item-value":"value",label:"Select","persistent-hint":"","single-line":""},model:{value:e.formCreate.isActive,callback:function(t){e.$set(e.formCreate,"isActive",t)},expression:"formCreate.isActive"}}),e._v(" "),a("span",{staticClass:"vee-errors"},[e._v(e._s(r[0]))])]}}],null,!0)})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("v-text-field",{attrs:{label:e.generateTitleView("areaNo","area"),outlined:"",height:10},model:{value:e.formCreate.areaNo,callback:function(t){e.$set(e.formCreate,"areaNo",t)},expression:"formCreate.areaNo"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"title-wrapper"},[a("h3",{staticClass:"cameraTitle"},[e._v(e._s(e.generateTitleView("cameraList","camera"))+"\n                        ("+e._s(e.formCreate.cameras.length)+")")]),e._v(" "),a("span",{staticClass:"btn-add-camera",on:{click:e.openAddCamera}},[e._v(e._s(e.generateTitleView("addCamera","area")))])]),e._v(" "),a("md-table",{attrs:{"md-card":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var r=t.item;return a("md-table-row",{attrs:{"md-auto-select":""}},[a("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraName","camera")}},[e._v(e._s(r.name)+"\n                        ")]),e._v(" "),a("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraIp","camera")}},[e._v("\n                          "+e._s(r.ip)+"\n                        ")]),e._v(" "),a("md-table-cell",[a("span",{on:{click:function(t){return e.removeCamera(r)}}},[a("md-icon",{staticClass:"removeCamera"},[e._v("delete")])],1)])],1)}}],null,!0),model:{value:e.formCreate.cameras,callback:function(t){e.$set(e.formCreate,"cameras",t)},expression:"formCreate.cameras"}})],1)],1)],1)])])])])],1)]}}])}),e._v(" "),a("v-dialog",{attrs:{"max-width":"550"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[a("v-card",[a("v-card-title",[e._v(e._s(e.generateTitleView("addCameraTitle","camera")))]),e._v(" "),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.listQuery.name,expression:"listQuery.name"}],staticClass:"cameraInput",attrs:{type:"text",placeholder:e.generateTitleView("cameraName","camera")},domProps:{value:e.listQuery.name},on:{input:function(t){t.target.composing||e.$set(e.listQuery,"name",t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn-search"},[a("font-awesome-icon",{attrs:{icon:"search",color:"#fff"},on:{click:e.searchCamera}})],1)]),e._v(" "),a("div",{staticClass:"md-contents"},[e.listCameras.length>0?a("md-table",{attrs:{"md-card":""},on:{"md-selected":e.onSelect},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var r=t.item;return a("md-table-row",{attrs:{"md-selectable":"multiple","md-auto-select":""}},[a("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraName","camera")}},[e._v(e._s(r.name)+"\n            ")]),e._v(" "),a("md-table-cell",{attrs:{"md-label":e.generateTitleView("cameraIp","camera")}},[e._v(e._s(r.ip)+"\n            ")])],1)}}],null,!1,3200008140),model:{value:e.listCameras,callback:function(t){e.listCameras=t},expression:"listCameras"}}):a("div",{staticClass:"noCamera"},[e._v("\n          "+e._s(e.generateTitleView("noCamera","camera"))+"\n        ")])],1),e._v(" "),a("md-dialog-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showDialog=!1}}},[e._v("\n          "+e._s(e.generateTitleView("close","camera"))+"\n        ")]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:e.addCamera}},[e._v(e._s(e.generateTitleView("addCamera","camera")))])],1)],1)],1)],1)},i=[];a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}))},"237a":function(e,t,a){"use strict";a.r(t);var r=a("a11e"),i=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);t["default"]=i.a},"44d7":function(e,t,a){"use strict";a.r(t);var r=a("0819"),i=a("237a");for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("de9f");var n=a("2877"),l=Object(n["a"])(i["default"],r["a"],r["b"],!1,null,"6df308a2",null);t["default"]=l.exports},7954:function(e,t,a){"use strict";var r=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.checkNumber=n,t.exportExcel=l,t.parseTime=o,t.formatTime=c,t.param2Obj=m,t.checkEmail=u,t.hasClass=d,t.addClass=f,t.removeClass=h,t.hasPermissionAction=g,t.data2blob=v,a("34ef"),a("6762"),a("2fdb"),a("3b2b"),a("4917"),a("28a5"),a("f576"),a("a481"),a("6b54");var i=r(a("7037"));a("c5f6"),a("7cdf");var s=a("5c96");function n(e,t,a){var r=parseFloat(t);return 0===r?a():r?void setTimeout((function(){Number.isInteger(r)?r<=0?a(new Error("Vui lòng nhập số lớn hơn hoặc bằng 0")):r>1e10?a(new Error("Vui lòng nhập số nhỏ hơn 10 tỷ")):a():a(new Error("Vui lòng nhập số"))}),1e3):a(new Error("Phải là số lớn hơn hoặc bằng 0"))}function l(e){}function o(e,t){if(0===arguments.length)return null;var a,r=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===(0,i.default)(e)?a=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var s={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},n=r.replace(/{([ymdhisa])+}/g,(function(e,t){var a=s[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return n}function c(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;var a=new Date(e),r=Date.now(),i=(r-a)/1e3;return i<30?"chỉ cần":i<3600?Math.ceil(i/60)+"vài phút trước":i<86400?Math.ceil(i/3600)+"vài giờ trước":i<172800?"1 ngày trước":t?o(e,t):a.getMonth()+1+"tháng"+a.getDate()+"ngày "+a.getHours()+" giờ"+a.getMinutes()+" phút"}function m(e){var t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function u(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function d(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function f(e,t){d(e,t)||(e.className+=" "+t)}function h(e,t){if(d(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}}function g(e,t,a,r){return e.includes(t)?(""!==a&&(window.location.href="/#/"+a),!0):((0,s.Message)({message:r,type:"error",duration:5e3}),!1)}function v(e,t){e=e.split(",")[1],e=window.atob(e);for(var a=new Uint8Array(e.length),r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return new Blob([a],{type:t})}},"7fe3":function(e,t,a){},a11e:function(e,t,a){"use strict";var r=a("dbce"),i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("7f7f");var s=i(a("ded3")),n=i(a("b804")),l=a("6087"),o=a("2f62"),c=r(a("c8a9")),m=a("a26e"),u=i(a("fc5c")),d=a("7954"),f=i(a("cff6")),h=i(a("7f8c")),g={model:"area/",modelCamera:"camera/",modelAuth:"auth/"},v={name:"",description:"",parentId:"",isActive:!0,thumb:"",cameras:[],areaNo:0},p={name:"CreateUser",components:{Sticky:n.default,VueUploadMultipleImage:u.default},data:function(){return{cameraSelected:[],showDialog:!1,menu:!1,formCreate:JSON.parse(JSON.stringify(v)),formTitle:null!=this.$router.currentRoute.params.id?this.generateTitleView("editArea","area"):this.generateTitleView("createArea","area"),currentUser:"",currentDate:"",isEdit:!1,urlUpload:"file/upUserAvatar",folderUpload:"https://172.20.10.2:9000/agency/Images/User/",AREA_STATUS:[{value:!0,label:this.generateTitleView("active","module")},{value:!1,label:this.generateTitleView("deactive","module")}],listQuery:{page:1,limit:10,name:"",status:null},images:[],imgFormat:"png",allowedImgFormat:["jpg","png"]}},computed:(0,s.default)({},(0,o.mapGetters)({language:"language",listParentAreas:g.model+"listParentAreas",listCameras:g.modelCamera+"availableCameras",areaNo:g.modelAuth+"areaNo"})),watch:{language:{immediate:!0,handler:function(e,t){this.AREA_STATUS=[{value:!0,label:this.generateTitleView("active","module")},{value:!1,label:this.generateTitleView("deactive","module")}]}}},mounted:function(){this.$store.commit("app/CHANGE_APP_TITLE","HỆ THỐNG GIÁM SÁT VÀ ĐIỀU KHIỂN ROBOT");var e=this.$router.currentRoute.params.id;"undefined"!==typeof e&&null!==e?this.getArea(e):this.formCreate.areaNo=this.areaNo,this.currentUser=this.$store.state.auth.name,this.formTitle===g.edit&&(this.isEdit=!0),this.getParentArea(),this.searchCamera()},methods:(0,s.default)((0,s.default)({},(0,o.mapActions)({actCreateArea:g.model+c.ACT_INSERT_AREA,actGetCurrentArea:g.model+c.ACT_FETCH_ONE_AREA,actEditArea:g.model+c.ACT_EDIT_AREA,actParentArea:g.model+c.ACT_FETCH_AREA_PARENT,actGetCamera:g.modelCamera+m.ACT_GET_CAMERA_AVAILABLE})),{},{handleSubmitUser:function(){this.formTitle===this.generateTitleView("editArea","area")?this.editArea():this.createArea()},getParentArea:function(){this.actParentArea({ParentId:null})},getArea:function(e){var t=this;this.actGetCurrentArea(e).then((function(e){var a=e.payload.records;t.formCreate=JSON.parse(JSON.stringify(a)),t.images=[{path:t.folderUpload+t.formCreate.thumb,default:1,highlight:1}]}))},createArea:function(){var e=this;this.formCreate["created"]=(new Date).toJSON(),this.formCreate["createdBy"]=this.currentUser,this.actCreateArea(this.formCreate).then((function(t){t.isSuccess?(e.$notify.success({title:e.generateTitleView("success","message"),message:e.generateTitleView("successMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/areas/index"}),2e3)):e.$notify.error({title:e.generateTitleView("areas","message"),message:t.message,duration:2e3})}))},editArea:function(){var e=this;this.formCreate["modified"]=(new Date).toJSON(),this.formCreate["modifiedBy"]=this.currentUser,this.actEditArea(this.formCreate).then((function(t){t.isSuccess?(e.$notify.success({title:e.generateTitleView("success","message"),message:e.generateTitleView("successMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/areas/index"}),2e3)):(e.$notify.error({title:e.generateTitleView("error","message"),message:e.generateTitleView("errorMessage","message"),duration:2e3}),setTimeout((function(){window.location.href="/#/users/areas/index"}),2e3))}))},openAddCamera:function(){this.showDialog=!0},searchCamera:function(){this.actGetCamera({current_page:this.listQuery.page,name:this.listQuery.name,is_active:!0,limit:this.listQuery.limit})},onSelect:function(e){this.cameraSelected=e},addCamera:function(){this.showDialog=!1,0===this.formCreate.cameras.length?this.formCreate.cameras=this.cameraSelected:this.formCreate.cameras=this.formCreate.cameras.concat(this.cameraSelected)},removeCamera:function(e){var t=this.formCreate.cameras.filter((function(t,a,r){return t.id!==e.id}));this.formCreate.cameras=t,this.listCameras.push(e)},uploadImageSuccess:function(e,t,a){var r=this,i=a[0].path,s=new FormData,n=-1===this.allowedImgFormat.indexOf(this.imgFormat)?"jpg":this.imgFormat,l=f.default[n];s.append("base64_image",(0,d.data2blob)(i,l),"base64_image."+this.imgFormat);var o=this.urlUpload;(0,h.default)({url:o,method:"post",data:s}).then((function(e){r.formCreate.thumb=e.data})).catch((function(e){console.log("ko")}))},editImage:function(e,t,a){setTimeout(function(){var e=this,t=a[0].path,r=new FormData,i=-1===this.allowedImgFormat.indexOf(this.imgFormat)?"jpg":this.imgFormat,s=f.default[i];r.append("base64_image",(0,d.data2blob)(t,s),"base64_image."+this.imgFormat);var n=this.urlUpload;(0,h.default)({url:n,method:"post",data:r}).then((function(t){e.formCreate.thumb=t.data})).catch((function(e){console.log("ko")}))}.bind(this),100)},beforeRemove:function(e,t,a){var r=confirm("Bạn có muốn xóa ảnh?");!0===r&&t()},generateTitleView:l.generateTitleView})};t.default=p},de9f:function(e,t,a){"use strict";var r=a("7fe3"),i=a.n(r);i.a}}]);